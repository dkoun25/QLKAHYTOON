@model QLKAHYTOON.Models.thongtintruyen
@{
    ViewBag.Title = "Thêm Truyện Mới";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    var listTheLoai = ViewBag.ListTheLoai as List<QLKAHYTOON.Models.theloai>;
}

<h2>Thêm Truyện Mới</h2>
<hr />

@using (Html.BeginForm("ThemTruyen", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

<div class="form-horizontal">
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <div class="form-group">
        <label class="control-label col-md-2">Mã Truyện</label>
        <div class="col-md-10">
            <input type="text" name="MaTruyen" class="form-control"
                   value="@ViewBag.MaTruyenAuto" readonly style="background-color: #eee; font-weight: bold;" />
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-md-2">Tên Truyện</label>
        <div class="col-md-10">
            @Html.EditorFor(model => model.TenTruyen, new { htmlAttributes = new { @class = "form-control", @required = "required" } })
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2">Tác Giả</label>
        <div class="col-md-10">
            @Html.EditorFor(model => model.TacGia, new { htmlAttributes = new { @class = "form-control", @required = "required" } })
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2">Mô Tả / Tóm Tắt</label>
        <div class="col-md-10">
            @Html.TextAreaFor(model => model.Slug, new { @class = "form-control", @rows = "5", @placeholder = "Nhập nội dung tóm tắt truyện tại đây..." })
            @Html.ValidationMessageFor(model => model.Slug, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2">Trạng Thái</label>
        <div class="col-md-10">
            <select class="form-control" name="TrangThai">
                <option value="Đang cập nhật">Đang cập nhật</option>
                <option value="Hoàn thành">Hoàn thành</option>
                <option value="Tạm ngưng">Tạm ngưng</option>
            </select>
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2">Ảnh Bìa</label>
        <div class="col-md-10">
            <input type="file" name="fileAnh" class="form-control" required />
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2">Thể Loại</label>
        <div class="col-md-10">
            <div class="row" style="max-height: 200px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; margin-left: 0; border-radius: 4px;">
                @if (listTheLoai != null)
                {
                    foreach (var item in listTheLoai)
                    {
                        <div class="col-md-4 col-sm-6">
                            <label style="font-weight: normal; cursor: pointer;">
                                <input type="checkbox" name="selectedGenres" value="@item.MaTheLoai" />
                                @item.TenTheLoai
                            </label>
                        </div>
                    }
                }
            </div>
            <p class="help-block">Bạn có thể chọn nhiều thể loại.</p>
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Lưu Truyện" class="btn btn-success" />
            <a href="@Url.Action("QuanLyTruyen", "Admin")" class="btn btn-default">Quay lại</a>
        </div>
    </div>
</div>
}