@{
    ViewBag.Title = "Trang Chủ";
    Layout = "~/Views/Shared/_Layout.cshtml"; // Đảm bảo dùng Layout chung

    // Lấy danh sách truyện từ ViewBag
    var truyenMoi = ViewBag.TruyenMoi as List<QLKAHYTOON.Models.thongtintruyen>;
    var truyenXemNhieu = ViewBag.TruyenXemNhieu as List<QLKAHYTOON.Models.thongtintruyen>;
    var truyenNoiBat = ViewBag.TruyenNoiBat as List<QLKAHYTOON.Models.thongtintruyen>;
}

<style>
    /* CSS cơ bản cho thẻ truyện, bạn có thể chỉnh sửa sau */
    .comic-gallery .card {
        margin-bottom: 20px;
        border: 1px solid #ddd;
        padding: 5px;
        border-radius: 4px;
    }

    .comic-gallery .card-img-top {
        height: 250px;
        object-fit: cover;
        width: 100%;
    }

    .card-title {
        height: 40px;
        overflow: hidden;
        font-size: 1em;
        text-align: center;
    }
</style>

<h2>Truyện Mới Cập Nhật</h2>
<div class="row comic-gallery">
    @if (truyenMoi != null && truyenMoi.Any())
    {
        foreach (var truyen in truyenMoi)
        {
            <div class="col-md-2 col-sm-4 col-xs-6">
                <div class="card">
                    <a href="@Url.Action("ChiTiet", "Truyen", new { id = truyen.MaTruyen.Trim() })">
                        <img src="@truyen.AnhTruyen" class="card-img-top" alt="@truyen.TenTruyen">
                    </a>
                    <div class="card-body">
                        <h5 class="card-title">
                            <a href="@Url.Action("ChiTiet", "Truyen", new { id = truyen.MaTruyen.Trim() })">@truyen.TenTruyen</a>
                        </h5>
                    </div>
                </div>
            </div>
        }
    }
</div>
<hr />

<h2>Truyện Xem Nhiều</h2>
<div class="row comic-gallery">
    @if (truyenXemNhieu != null && truyenXemNhieu.Any())
    {
        foreach (var truyen in truyenXemNhieu)
        {
            <div class="col-md-2 col-sm-4 col-xs-6">
                <div class="card">
                    <a href="@Url.Action("ChiTiet", "Truyen", new { id = truyen.MaTruyen.Trim() })">
                        <img src="@truyen.AnhTruyen" class="card-img-top" alt="@truyen.TenTruyen">
                    </a>
                    <div class="card-body">
                        <h5 class="card-title">
                            <a href="@Url.Action("ChiTiet", "Truyen", new { id = truyen.MaTruyen.Trim() })">@truyen.TenTruyen</a>
                        </h5>
                    </div>
                </div>
            </div>
        }
    }
</div>
<hr />

<h2>Truyện Nổi Bật</h2>
<div class="row comic-gallery">
    @if (truyenNoiBat != null && truyenNoiBat.Any())
    {
        foreach (var truyen in truyenNoiBat)
        {
            <div class="col-md-2 col-sm-4 col-xs-6">
                <div class="card">
                    <a href="@Url.Action("ChiTiet", "Truyen", new { id = truyen.MaTruyen.Trim() })">
                        <img src="@truyen.AnhTruyen" class="card-img-top" alt="@truyen.TenTruyen">
                    </a>
                    <div class="card-body">
                        <h5 class="card-title">
                            <a href="@Url.Action("ChiTiet", "Truyen", new { id = truyen.MaTruyen.Trim() })">@truyen.TenTruyen</a>
                        </h5>
                    </div>
                </div>
            </div>
        }
    }
</div>